plugins {
    id "java"
    id "scala"
    id "jetty"
    id "war"
    id "com.github.maiflai.scalatest" version "0.11"
}

repositories {
    mavenCentral()
    jcenter()
}

version = "0.1.0"

dependencies {
    compile "org.scala-lang:scala-library:${scalaVersion}.+"
    compile "com.iheart:ficus_${scalaVersion}:1.2+"
    compile "javax.ws.rs:javax.ws.rs-api:2+"
    compile "org.eclipse.jetty.aggregate:jetty-all:9+"
    compile "org.glassfish.jersey.containers:jersey-container-servlet:2+"
    compile "org.joda:joda-convert:1.8+"
    compile "joda-time:joda-time:2.9+"
    compile "com.fasterxml.jackson.core:jackson-core:${jacksonVersion}"
    compile "com.fasterxml.jackson.core:jackson-databind:${jacksonVersion}"
    compile "com.fasterxml.jackson.module:jackson-module-scala_${scalaVersion}:${jacksonVersion}"

    // Test-only dependencies
    testCompile "org.scalatest:scalatest_${scalaVersion}:2+"

    testRuntime "org.pegdown:pegdown:+"
}

compileScala {
    scalaCompileOptions.additionalParameters = ["-feature"]
}

// By default, the jetty plugin would run the servlet under the path
// "/aion2", whereas since this will most often be deployed as a standalone
// application rather than part of a webapp, the default is to run this servlet
// at the root of the server
jettyRunWar.contextPath = "/"
